<app-property-header></app-property-header>

<div>
  <div class="container">
    <!-- Start Toolbox -->
    <div class="d-flex flex-wrap align-items-center mb-4 gap-2">
      <h5 class="fw-semibold text-capitalize mb-0 col">(145) Result For All Listing</h5>
      <div class="btn-group ms-auto" role="group" aria-label="Basic example">
        <a routerLink="/buyerHome/properties-grid" class="btn btn-outline-default btn-sm">
          <i class="fa-solid fa-border-all"></i>
        </a>
        <a routerLink="/buyerHome/properties-list" class="btn btn-outline-default btn-sm active">
          <i class="fa-solid fa-table-list"></i>
        </a>
      </div>
    </div>
    <!-- /.End Toolbox -->

    <div class="row g-4">
      <div
        class="col-sm-6 col-lg-4 col-xl-6 d-flex"
        *ngFor="let property of properties; let i = index"
        data-aos="fade-up"
        [attr.data-aos-delay]="i * 100"
        data-aos-duration="700"
      >
        <div class="border-0 card card-property rounded-3 shadow w-100 flex-fill overflow-hidden position-relative">
          <a [routerLink]="['/buyerHome/properties-details', property.id]" class="card-link"></a>

          <!-- صورة العقار -->
          <div class="property-img card-image-hover overflow-hidden position-relative">
            <img [src]="property.image" alt="" class="img-fluid" />
            <div
              class="card-property-badge d-inline-block end-1 fs-13 fw-semibold position-absolute property-tags px-2 py-1 rounded-3 top-1"
              [ngClass]="{
                'bg-white': property.tagColor === 'white',
                'bg-primary': property.tagColor === 'primary',
                'text-dark': property.tagTextColor === 'text-dark',
                'text-white': property.tagTextColor === 'text-white'
              }"
            >
              {{ property.tag }}
            </div>
          </div>

          <!-- محتوى الكارد -->
          <div class="card-property-content-wrap d-flex flex-column h-100 position-relative p-4">

            <!-- السعر -->
            <div class="align-items-end card-property-price d-flex flex-row mb-1 gap-1">
              <h3 class="m-0 fw-bold text-primary">{{ property.price }}</h3>
              <div>{{ property.period }}</div>
            </div>

            <!-- العنوان + زر القلب -->
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h4 class="property-card-title m-0">{{ property.title }}</h4>
              <button
                class="btn btn-light btn-sm fav-btn"
                (click)="toggleFavorite(property)"
              >
                <i class="fa-heart fs-5"
                   [ngClass]="property.isFavorited ? 'fa-solid' : 'fa-regular'"
                   [style.color]="property.isFavorited ? 'red' : '#888'">
                </i>
              </button>
            </div>

            <!-- العنوان الإضافي -->
            <div class="card-property-description mb-3">
              {{ property.address }}
            </div>

            <!-- التفاصيل -->
            <div class="border card-property-facilities gap-2 hstack mt-auto p-3 pt-3 rounded-3 text-center">
              <div>
                <i class="fa-solid fa-bed text-dark me-1"></i>
                <span>{{ property.beds }} Beds</span>
              </div>
              <span class="vr"></span>
              <div>
                <i class="fa-solid fa-bath text-dark me-1"></i>
                <span>{{ property.baths }} Baths</span>
              </div>
              <span class="vr"></span>
              <div>
                <i class="fa-solid fa-vector-square text-dark me-1"></i>
                <span>{{ property.size }}</span>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
